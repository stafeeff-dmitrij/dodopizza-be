# ДОДО ПИЦЦА

## Команды
### Pre-commit

В проекте используются Git-хуки для автоматической проверки и форматирования кода перед созданием коммита.

**ВАЖНО**: на локальной машине должен быть установлен пакет **pre-commit**:
   ```
   pip install pre-commit
   ```

Применяемые хуки описаны в корне проекта в файле .pre-commit-config.yaml

Для активации хуков вводим:
   ```
   pre-commit install
   ```
Предварительная проверка и форматирование кода:
   ```
   pre-commit run --all-files
   ```

Создание коммита через commitizen (вначале сделать git add .):
   ```
   cz commit
   ```

### Миграции
Экспорт категорий:
   ```
   python manage.py dumpdata catalog.category --indent 2 > ../fixtures/1 categories.json
   ```
Экспорт ингредиентов:
   ```
   python manage.py dumpdata catalog.ingredient --indent 2 > ../fixtures/2-ingredients.json
   ```
Экспорт товаров:
   ```
   python manage.py dumpdata catalog.product --indent 2 > ../fixtures/3-products.json
   ```
Экспорт вариаций:
   ```
   python manage.py dumpdata catalog.variation catalog.variationtoingredient --indent 2 > ../fixtures/4-variations.json
   ```
Импорт категорий:
   ```
   python manage.py loaddata ../fixtures/categories.json
   ```

## Сделать
- Смена статусов категорий (включая всех товаров в этих категориях, если товар не принадлежит другим активным категориям) и товаров

- Точно ли меняется версия приложения при исправлении багов и внесении новых правок
- Сделать автоматический git add . при команде cz commit
- При пуше в мастер автосборка на сервере с кнопкой ручного деплоя как в гитлабе
- Разобраться почему при запросе категорий делается много лишних запросов к БД
- При удалении записи из БД также автоматом удалять картинку

### Не добавленные товары
- Среди новинок не добавлена "3 пиццы 35 см"
- Среди пицц не добавлена "Пицца из половинок"
- Категория "Комбо"
- Категория "На компанию"
- Среди соусов не добавлен "2 соуса"


## Новые товары (добавить + привязать ингредиенты):
- Мясной микс с говядиной и колбасками
- Говядина с песто
